{% from "webshop/templates/includes/macros.html" import field_filter_section, attribute_filter_section, discount_range_filters %}
{% extends "templates/web.html" %}

{% block header %}
 <style>
  .product-banner {
    background: linear-gradient(90deg, #570987, #2d2c2c);
    color: #ffffff;
    padding: 4rem 0;
}
.breadcrumb_a a {
    font-size: 1rem;
    color: #ffffff;
    font-weight: 700;
    text-decoration: none;
     /*opacity: 0.8; */
    transition: opacity 0.3s ease;
}
 
.breadcrumb_a span {
    margin: 0 9px;
    color: #ffffff;
}
 
.product-banner-title {
    font-size: 3rem;
    font-weight: 700;
    margin: 0;
    border-top: 1px solid rgba(255, 255, 255, 0.4);
    padding-top: 2rem;
}
</style>
<section class="product-banner mb-5">
<div class="container-fluid">
  <nav class="breadcrumb_a">
<a href="/">Home</a> <span>/</span> <a href="/shop-by-category">Shop by Category</a><span>/</span><a href="/shop-by-category">{{ _(item_group_name or "All Products") }}</a>
</nav>
<h1 class="product-banner-title">{{ _(item_group_name or "All Products") }}</h1>
</div>
</section>
{% endblock header %}

{% block script %}
<script type="text/javascript" src="/all-products/index.js"></script>
{% endblock %}

{% block page_content %}
<div class="item-group-content container" itemscope itemtype="http://schema.org/Product" data-item-group="{{ name }}">
	<div class="item-group-slideshow mb-4">
		{% if slideshow %}
			{{ web_block("Hero Slider", values=slideshow, add_container=0, add_top_padding=0, add_bottom_padding=0) }}
		{% endif %}

		{% if description %}
		<div class="item-group-description text-muted mb-4" itemprop="description">{{ description or ""}}</div>
		{% endif %}
	</div>

	<!--<div class="row g-4">-->
		<!-- Filters -->
		<!--<div class="col-12 col-md-3">
			<div class="bg-white shadow rounded-4 p-4 border border-purple-200 h-75">
				<div class="d-flex justify-content-between align-items-center mb-3">
					<div class="fw-semibold" style="color:#570987;">{{ _('Filters') }}</div>
					<a class="text-decoration-none small" href="/{{ doc.route }}">{{ _('Clear All') }}</a>
				</div>

				{% if field_filters %}
				<div class="mb-3">
					{{ field_filter_section(field_filters) }}
				</div>
				{% endif %}

				{% if attribute_filters %}
				<div>
					{{ attribute_filter_section(attribute_filters) }}
				</div>
				{% endif %}
			</div>
		</div>-->

		<!-- Product List -->
		<div id="product-listing" class="col-12 col-md-12 shadow rounded-4 p-4 border border-purple-200">
			<div class="bg-white ">
				<!-- Products rendered dynamically via all-products/index.js -->
			</div>
		</div>
	<!--</div>-->
</div>
<script>
	document.addEventListener("DOMContentLoaded", function () {
     const element = document.querySelector('.container.my-4');
      const breadcrumbs = document.querySelector('.page-breadcrumbs');
      const header = document.querySelector('.page-header');
      const pageheader = document.querySelector('.page-header-wrapper');
      if (pageheader){
          pageheader.classList.add('p-0');
      }
      if (header){
          header.style.width = "100%";
      }
      if (breadcrumbs) {
          breadcrumbs.style.display = "none";
      }
      if (element) {
        element.classList.remove('container');
        element.classList.remove('my-4');
        element.classList.add('bg-white');
        }
     }
  )
</script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Hide breadcrumbs if any
		//document.querySelectorAll(".breadcrumb").forEach(el => el.style.display = "none");
		

		// Style all buttons to match tailwind purple
		/*document.querySelectorAll("button").forEach(btn => {
			btn.style.backgroundColor = "#570987";
			btn.style.color = "#ffffff";
			btn.style.borderRadius = "0.5rem"; // rounded-md
		});*/
	});

	frappe.ready(() => {
		$('.btn-prev, .btn-next').click((e) => {
			const $btn = $(e.target);
			$btn.prop('disabled', true);
			const start = $btn.data('start');
			let query_params = frappe.utils.get_query_params();
			query_params.start = start;
			let path = window.location.pathname + '?' + frappe.utils.get_url_from_dict(query_params);
			window.location.href = path;
		});
	});
</script>
{% endblock %}
